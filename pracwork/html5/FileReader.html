<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>fileReader</title>
</head>
<body>
	<form>
		<table>
			<tr>
				<td>
					<img id="uploadPreview" src="" style="width:100px;height: 200px;">
				</td>
				<td>
					<input type="file" id="uploadImage" name="myImage" onchange='loadImageFile()'>
				</td>
			</tr>
		</table>
	</form>
	<script type="text/javascript">
		var fileReader = new FileReader(),
			reg = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;

		// onload 在读取操作完成时的触发（fileReader.readAsDataURL）
		fileReader.onload = function(event){
			document.getElementById("uploadPreview").src = event.target.result;
		};

		function loadImageFile(){
			if (document.getElementById("uploadImage").files.length == 0 ) {
				return;
			}
			var oFile = document.getElementById("uploadImage").files[0];
			if (!reg.test(oFile.type)) {
				alert('please choice one picture');
			}
			fileReader.readAsDataURL(oFile);
		}
	</script>
</body>
</html>